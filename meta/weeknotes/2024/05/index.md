# 2024 - Week 5

A bit of a mixed bag of a fortnight, half of it spent slogging away on new, old search, the other half packed full of outreach opportunities. Let's start with the latter.

## Outreach opportunities

Anyone who knows us would vouch for the fact we're heads down kinda guys. Occasionally though, one has to glance up from one's laptop and engage with one's community of practice. After all, as Young Robert would no doubt point out, how is one to populate one's benefit realisation matrix dashboard if one doesn't engage with one's community of practice?

First up in our many and varied outreach opportunities was a meeting with [Jennifer](https://www.historyofparliamentonline.org/about/staff/dr-jennifer-davey) and [Martin](https://www.historyofparliamentonline.org/about/staff/dr-martin-spychal) from the [History of Parliament Trust](https://www.historyofparliamentonline.org/). Present and correct were Librarians [Anya](https://bsky.app/profile/anyaso.bsky.social), [Anna](https://twitter.com/anna_buck) and Susannah, computational mic controller [Michael](https://bsky.app/profile/fantasticlife.bsky.social) and [Shedcode](https://shedcode.co.uk/) [James](https://mastodon.me.uk/deck/@jamesjefferies). Jennifer has recently taken over the helm of HoPT from [Professor Paul](https://twitter.com/pseaward1), her arrival coinciding with a request for finance for the continuation of our [Rush database normalisation work](https://trello.com/b/4JA1hW6I/rush-data-2020). Sorry Jennifer. Subjects for discussion were the [Rush database](https://membersafter1832.historyofparliamentonline.org/), the [peerage database](https://peerages.historyofparliamentonline.org/) and some work James had been doing for Paul on division records both ancient and modern. A fine time was had by all and we look forward to working together in the future.

No sooner had telephone receivers been placed down than Anya and Michael found themselves in a meeting with [John](https://bsky.app/profile/anterotesis.bsky.social) from the [British History Online](https://www.british-history.ac.uk/) project. John had got in touch off the back of our constant quest for Bluesky invite codes, necessary for [bot making](https://ukparliament.github.io/ontologies/meta/bots/) purposes - weeknotes [passim](https://ukparliament.github.io/ontologies/meta/weeknotes/2023/50/#bots-to-blue-skies). Kindly donating a handful of codes, he suggested a chat would also be good to explore where our interests overlap. Not only that, it turned out John is in fact our reader. Remarkable. We meet at last. Hiya John.

Unfortunately, aside from the aforementioned Rush and peerage databases, we don't have an awful lot of historical data, Parliamentary Search only covering the last 40 years or so. Almost inevitably, the subject of [Historic Hansard](https://api.parliament.uk/historic-hansard/index.html) came up and - feeling himself quite out of his depth - Michael paged [Young Robert](https://bsky.app/profile/robertbrook.bsky.social) who promptly joined the call. Somehow or other we seemed to squeeze most of the production process of Historic Hansard - from scanning to [OCR](https://en.wikipedia.org/wiki/Optical_character_recognition) to aborted attempts at corrections - into the last ten minutes of the meeting. We hope it was of some use to John. It certainly seemed to give food for thought. Lovely to meet you John. Hoping our paths cross again soon.

Those with long memories may well recall our efforts to make [persistently citable standing orders](https://ukparliament.github.io/ontologies/meta/weeknotes/2020/49/#orders-being-standing). That from way back in 2020. My word. Since then, the code has been handed over to Shedcode James to add editing functionality and a general veneer of professionalism. A project that sadly stalled when we ran out of money to pay him. More below. The standing orders work was made possible by [Rad](https://radoslawzubek.com/) and the [ParlRules](https://parlrulesdata.org/) team kindly making their lovingly-compiled [data available under a Creative Commons licence](https://parlrulesdata.org/license.html). Rad got back in touch after Christmas to talk through his funding bid for the next stage of the ParlRules project: using machine learning techniques to identify powers, duties and the agents holding them in House of Commons public standing orders. The proposed project appears to complement a project being run by [John](https://twitter.com/johnlsheridan) from [The National Archives](https://www.nationalarchives.gov.uk/), looking to do [notionally similar work with legislation](https://gtr.ukri.org/projects?ref=AH%2FL010232%2F1#/tabOverview). So we were, of course, keen to support. A letter to that effect has now been drafted, signed by Sarah, Eve and Grant, and dispatched in the direction of Oxford. Thanks all.

## On orders being standing

If you're one of the very many people on the waiting list for a website with persistently citable standing orders, please bear with us. The delay has not been caused by any tardiness on our part, nor on the part of Shedcode James. Public sector procurement rules being public sector procurement rules, at some point we ran clean out of ways to pay the lad. And we all know what Yorkshire folks are like ...

Thanks to the diligent efforts of Librarian Susannah, this slight obstacle has now been resolved, James has reopened his text editor and resumed work. Changes made so far include [sorting out the editor authentication](https://trello.com/c/ouNC8biA/2-sort-out-passwordless-authentication), [removing the unused and confusing draft status](https://trello.com/c/zkLi1zmp/13-remove-draft-status-and-have-promote-demote-buttons-publish-in-edit-or-unpublish-or-something) and [changing the word destroy to the much more friendly delete](https://trello.com/c/6YxLuw56/12-change-destroy-to-delete-across-the-board). At some point fairly soon - this year at least, we hope - there should finally be something to show. Though, obviously, we have said that before.

## New, old search

We are sad to report that designer Graeme has decided to abandon us and move on to pastures new. He's been a pleasure to work with and we'll miss him greatly. Best of luck for whatever's next Graeme.

Whilst Parliament is still paying him, we thought it remiss to not reward the cash with the dignity of labour. So Graeme's been spending his final hours looking at "treatments" - sorry - for result page "furniture" - more sorry. He's also been looking at error pages in the form of both [404](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404)s and [500](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500)s. Reviewing the 404 work caused Young Robert to comment that any messaging that a page cannot be found always seemed odd when a page was clearly being displayed. Thanks for the departure into metaphysics, Young Robert. We know we can rely on you.

Librarians Jayne and Ned are having great fun checking and rechecking Developer Jon's [search object pages](https://search-prototype.herokuapp.com/search-prototype). For some definition of fun. The Librarian Slack instance is currently lit up with cards moving from the doing pile to the checking pile, back to the doing pile and so on and so forth. A Librarian / Developer version of ping-pong, if you will. At some point soon, we may well have an object page or two that everyone's happy with. Stay tuned.

Elsewhere, organ grinder Anya together with her faithful monkey Michael have been trying to get ahead of the design and development game. For once. Not wanting work to start on search results until they had a better grasp of the materials at hand, they've created [yet another spreadsheet](https://docs.google.com/spreadsheets/d/1pHEwWKCojXBXvqD8vZ9VPhyRhtL-37K0j5D8UxAQMMI/edit?usp=sharing), this one documenting what they think should appear on a search result for a given content type. If you're a user of Parliamentary Search, why not take a look? The sooner we get feedback, the sooner we can course correct where necessary. There being *nothing* more valuable than an actionable insight, as Young Robert might put it.

On the subject of Young Robert, he's also been busy, roping in computational odd-job man Michael to cobble together [Cucumber](https://github.com/ukparliament/solr-specs/blob/main/features/solr.feature) and [RSpec](https://github.com/ukparliament/solr-specs/blob/main/features/step_definitions/stepdefs.rb) tests for our [Solr](https://en.wikipedia.org/wiki/Apache_Solr) upgrade. Since [our Jianhan](https://twitter.com/jianhanzhu) made the leap from Solr 3.5 to Solr 9, we've known that some of the result listings returned have been different. Different better or different worse, we don't know. Just different. The plan is to write a set of tests that compare the number of results returned for a given set of queries and, once that's done, a set of tests to compare result positions for a given set of queries. So far, they've managed to get the machines to check they can connect to the internet, check they can connect to old Solr, check they can connect to new Solr and check they can authenticate to the former. Not much, perhaps, but, as [a great man](https://twitter.com/hellomatty) once said, not nothing.

Once we have tests in place and once we have the ability to differentiate between different better and different worse and once we can fix up the different worse stuff without making the different better stuff worse, well, then we have a plan. A short-term plan admittedly, but nevertheless, a plan. Different worse being mitigated, we plan to swap out the antiquated Solr sitting behind our current search interface(s) for Jianhan's upgraded efforts. This may, in fact, be a medium-term plan. It's rather hard to tell. We'd also like to have rid of the current external service and make the service that's currently internal-only, externally available. We hope you're following.

As part of this 'plan', we've had a card knocking around for some months to describe mappings between the old external URLs and the new external URLs. This in the hope of one day writing an [htaccess](https://en.wikipedia.org/wiki/.htaccess) file to redirect from what was to what will be. As part of the last search backend meeting, we took a look and, my word, what a mess. Michael would like to astrally project his best Paddington Bear stare at whoever thought Parameters.Fields.house was a reasonable name for a House parameter. We recognise that not everyone has the same feelings about URLs as Young Robert and Michael, but still we challenge you to look at [this URL](https://search-material.parliament.uk/search?Parameters.Fields.all=cow&Parameters.Fields.all-target=&Parameters.Fields.phrase=&Parameters.Fields.phrase-target=&Parameters.Fields.any=&Parameters.Fields.any-target=&Parameters.Fields.exclude=&Parameters.Fields.exclude-target=&Parameters.Fields.house=House+of+Commons&Parameters.Fields.member=&Parameters.Fields.subject=&Parameters.Fields.reference=&Parameters.Fields.date=&Parameters.Fields.date=&When%3A=session&Parameters.Fields.session=22%2F23) and not weep.

In terms of content types supported, a decision has been made. Wonders will never etc. Some years ago, we forget quite when, the mists of time being quite thick, we undertook a short-lived and ultimately unsuccessful attempt to load petitions of the electronic type - or [e-Petitions](https://petition.parliament.uk/) as we still quaintly call them - into Parliamentary Search. There to be subject indexed and interlinked with debates and whatnot by our crack team of librarians. It was all done with the best of intentions but, unfortunately, our creaking infrastructure could not support the volume of data generated. The whole thing coming to a grinding halt, leaving behind the vestigial stump of an unmaintained content set. In consultation with the [Petitions Committee](https://committees.parliament.uk/committee/326/petitions-committee/), it was decided to remove said stump from Parliamentary Search, from the Solr instance that underpins Parliamentary Search and from the triplestore that underpins Solr. Since then, our Jianhan has popped on his best pinafore and [scrubbed the decks clean](https://trello.com/c/c7OIOoGE/124-remove-e-petitions-entirely). Searchwise, e-Petitions are now a goner. Quite dead. Stone dead. With calm winds, a flat sea and a more seaworthy vessel, we hope to one day return to the upper reaches of the e-Petition passage. To that end, Jianhan has also taken a backup of what we did have. Of course he has.

## I am a procedural cartographer - to [the tune of the Palace Brothers](https://www.youtube.com/watch?v=owvF3Vb0JhA&ab_channel=tomkat69pc)

With Librarian Jayne busy testing search, we have very little to report in terms of [map making](https://ukparliament.github.io/ontologies/procedure/maps/) this week. That said, Librarians [Ayesha](https://twitter.com/askalibrarylady) and [Claire](https://twitter.com/tinysprite) have been beavering away in the background, [remapping committee consideration steps](https://trello.com/c/JWOkAnfi/273-remapping-caused-vs-allows) to take of account of both [causal relationships when instruments are laid and allowed relationships when instruments are withdrawn](https://ukparliament.github.io/ontologies/procedure/maps/meta/design-notes/#potential-states-of-a-business-step). And if that means anything to you, we'd be mightily surprised. Tune in next time, when we might have more to say. Or might not.

## People, places, parties

Over in [psephologyland](https://api.parliament.uk/psephology), we have a couple of small changes to report. First off, a [new Order in Council](https://api.parliament.uk/psephology/legislation-items/uksi-2023-1230) has been added, creating four new boundary sets - one in [England](https://api.parliament.uk/psephology/boundary-sets/1), one in [Wales](https://api.parliament.uk/psephology/boundary-sets/2), one in [Scotland](https://api.parliament.uk/psephology/boundary-sets/3) and one in [Northern Ireland](https://api.parliament.uk/psephology/boundary-sets/4). Or rather it will do once dissolution happens. [According to the legislation](https://www.legislation.gov.uk/ukpga/1986/56/section/4#section-4-6), new constituencies - and, by extension, the boundary sets containing them - come into being the day after dissolution day. Since we don't yet know when dissolution day will fall, it's not yet possible to apply end dates to current boundary sets, nor start dates to the new ones.

We've also taken the [spreadsheet of new constituencies](https://docs.google.com/spreadsheets/d/1aL9zZTQiFRawizFtJt_l1wcKGQ0GKLIR5JhJzkxfhbQ/edit?usp=sharing) lovingly compiled by Librarians Anna and Emily, [imported](https://github.com/ukparliament/psephology/blob/main/lib/tasks/setup.rake#L1021) them and matched them up to our new boundary sets. Which means our [full list of constituencies](https://api.parliament.uk/psephology/constituency-areas) is somewhat confusing, containing a mixed list of constituencies with start dates but no end dates and constituencies with neither start dates nor end dates. Conversationally, we're sticking with distinguishing between current constituencies and 'new' constituencies, though the  'new' constituencies aren't really 'new' yet. Rather in some Schr√∂dinger state between proposal and actuality. Gestating constituencies might be closer to the truth.

Said gestating constituencies were just about in place when the telephone rang and news of the publication of [notional results](https://en.wikipedia.org/wiki/Notional_election_results) flooded in. These being some approximation of what might have happened in the [2019 general election](https://api.parliament.uk/psephology/general-elections/3) if the gestating constituencies had been in place back then. For the psephologically-minded amongst us, the [notional results were published](https://downloads.bbc.co.uk/news/nol/shared/spl/xls_spreadsheets/results_spreadsheet.ods) by the BBC last week alongside [a PDF explainer](https://downloads.bbc.co.uk/news/nol/shared/bsp/hi/pdfs/bounds_explainer.pdf). Imagine our excitement, as we clicked and downloaded. Excitement only tempered when we double clicked and opened. My word. What a treat. An 80 column wide spreadsheet is quite the sight to behold.

But you know us. We're not amongst [life's complainers](https://twitter.com/fantasticlife/status/1751264727370469569). Picking up his trusty SQL spanner, Michael set about importing the data. Or at least trying to. Which is why, if you'd been in Dartmouth Street last week, you'd have heard mournful whimpers from meeting room 11 and possibly seen tears leaking under the door. 80 column wide spreadsheets and code are just not meant to meet. No-one has that many fingers.

Still, we are nothing if not team players. Can I borrow your brain? Michael asked Young Robert. Also your fingers. A meeting was set up. If those two computational allrounders can't count to 70, who can? They were just about to get stuck in with notepaper and abacus when Data Scientist Louie got in touch. That spreadsheet you were complaining about, he said, [I've transposed it](https://docs.google.com/spreadsheets/d/10vz_XCjqjZSgGqEMzHmHJTb-NUFyAi4-7v5j0L_8_N4/edit?usp=sharing). And lo! What had been 80 columns and 650 rows is now 16 columns and 4253 rows. One row per 'party' / constituency combination. A thing of beauty that must have saved several days of work. If you find yourself working with notional result data and only have ten fingers, please do download Louie's spreadsheet. You will not regret it, we promise. Thank you Louie. You have rescued us from madness and deserve an beer at the very least.