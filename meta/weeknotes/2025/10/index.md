# 2025 - Week 10

We are conscious that these notes are usually written, top-to-toe in one sitting. Usually over the weekend. Often with a mild to middling hangover. Because neither of us are quite as young as we used to be, we often find ourselves setting out with little to no memory of what's actually happened. This, in turn, leads to promises of brevity that we rarely manage to attain. Several hours later, we find ourselves mired in a browser bar of Trello boards and the inevitable wall of text that accompanies them. For that reason, this week's outpourings come with no such promise. Let's just get stuck in and see where we end up.

## New, old search

New, old parliamentary search continues on its consolidation journey toward coherence, information display now consistent across our page types. Which, given we only really have two types of page may well appear to be taking somewhat longer than any right thinking delivery manager would condone. Please trust us, they're really quite complicated pages.

As the days tick by, the work gets ever more granular, the accompanying cards more granular still. So we're not going to bore our dear reader with the intimate details of what's been fixed over the last few weeks. Please rest assured that Librarian Jayne and Developer Jon's breakneck game of Trello-based ping-pong resulted in 14 more cards making their way to the happy pile. By way of a quick summary of highlights, tweaking an existing search to kick off a new search now preserves the user's selection of results per page, detail level and result ordering which is about as RESTful as we're ever likely to get; title attributes on filter links display the scope note where present; the application no longer panics when faced with zero results; and testing with assistive software has commenced. Much better than the service we're attempting to replace we're told. Well, you'd certainly hope so.

In other news, Developer Jon has also been tyding the markup to ensure that all our pages pass the HTML validation test. Which they now do. Ish. There remains one problem where the validator complains about something that's perfectly valid according to the HTML5 specification. And another problem whereby Rails helpers add autocomplete='off' to hidden fields as a workaround for a bug in Firefox. Given we're not paid to fix Firefox, that's definitely someone else's problem. At this point, our dear reader may well be thinking, why bother? 90% of browser code is foregiveness. Does any browser really care if your markup is valid? Again you'll have to trust us. This kind of attention to detail greatly pleases our two resident old men. And they don't get much other pleasure from life.

All these tidies leave us with four consolidation cards on the checking pile, and five still to go, before we enter the next phase of work. And what might that be, you may well be asking. Well ... for the moment, new, old parliamentary search takes the user's search string and passes it straight to Solr. This is all rather different to production search, where the search string is first sent to SES - our taxonomy API. This call enriches the words typed with both identifiers and synonyms. Which is why a search for 'bird flu' also returns results for 'avian influenza'. And vice versa. The taxonomy lookup is the bit of search that makes it not rubbish and, occasionally, close to magical.

This then is Developer Jon's next piece of work. Or would be if his contract wasn't about to run out. Marvellous. Delivery Manager Lydia continues to look for workarounds, in a way that only Delivery Manager Lydia can. Absolute whirlwind that lass. We'd be lost without her.

The production search implementation is further complicated by someone back in 2009 suggesting it should 'work like Google'. Which is the kind of thing people say in workshops, not being the one's forced into thinking whether that might be possible. In practice, 'work like Google' was taken to mean that a search for Diane Abbott should return the same results as a search for 'Diane Abbott' and not a search for 'Diane' AND 'Abbott'. Somehow removing the necessity for users to quote names and phrases. This requirement lead to a whole bunch of string tokenisation, splitting the query string into candidate phrases, all of which were sent to SES in the hope some would match a taxonomy term. An implementation that's been going wrong in unexpected ways for the past 16 years. Will we attempt such shenanigans again? We're not really sure. As Librarian Ned said, "we've failed to make it work for more than a decade. It seems unlikely we'll make it work now." A sentiment we're all tempted to concur with.

## Moving fast / not breaking things

Librarian colleagues are often asked, how do you cope having two young, thrusting whippersnappers like Robert and Michael around? They have so much energy. And stamina. Do you not worry they'll move too fast and break things. In the voice of Librarian Anya, reader, we do indeed worry. That's why we brought in Shedcode James to add a veneer of professionalism to their scattergun efforts. And professionalism he has indeed added.

The past couple of weeks have also found James in something of a consolidation phase, casting an eye over applications large and small and upgrading them to meet more modern standards. Or 'hardened', as Young Robert would probably say. Heroku instances have been updated, Ruby instances have been updated, Rails instances have been updated, Gem dependencies have been updated, database backups have been added, procfiles have been introduced, logs have been raged at, rollbar rolled out and SQL updated. And a whole bunch of other computational magic performed. All in the cause of making everything more safe, more secure and easier to maintain. Going forward, as Young Robert might find himself forced to add.

So far, James has ticked off eight applications: [bill papers](https://api.parliament.uk/bill-papers), [committee papers](https://api.parliament.uk/committees), [Library feeds](https://api.parliament.uk/library-feeds), [the MNIS Prodder](https://api.parliament.uk/mnis-prodder), [the regnal year generator](https://api.parliament.uk/regnal-years), [the Resul Umit general election dataset](https://api.parliament.uk/uk-general-elections), [our attempts at improving upon the god-awful FCDO treaty website](https://api.parliament.uk/uk-treaties) and last - but by no means least - our [beloved egg timer](https://api.parliament.uk/egg-timer).

The latter also benefits from what Robert would probably call 'observability', the notoriously fickle Google calendar integration now set up to alert all concerned next time it inevitably fails. There is still work to do to act upon these notifications. We remain hopeful that one day the machines can be taught to recover from such failures without fickle humans needing to get involved. But such work is on hold until James escapes his current 'dev-ops' hell. Sorry James.

## I am a procedural cartographer - to [the tune of the Palace Brothers](https://www.youtube.com/watch?v=owvF3Vb0JhA&ab_channel=tomkat69pc)

Way back in the mists of time - way back, way way back - we did some work with Messrs Hennessy and Korris, mapping out [cheatsheets of cartographic cascades](https://github.com/ukparliament/ontologies/tree/master/procedure/maps/meta/motion-cheat-sheets/legislation/secondary/statutory-instrument) across all our procedure maps. Cascades, in this case, being things that should - at least in theory - automatically happen when a different thing happens. One example being, where a made affirmative instrument is revoked or lapsed or rejected by the House of Lords, any extant approval motion in the House of Commons *should* be [caused to be withdrawn](https://github.com/ukparliament/ontologies/blob/master/procedure/maps/meta/motion-cheat-sheets/legislation/secondary/statutory-instrument/affirmative/made/index.md#approval-motion-is-caused-to-be-withdrawn). This week, our crack team of librarians finally found the time to [act on this information](https://trello.com/c/XU3qkN9k/325-remap-for-cheatsheets-with-cascades), both maps and data being updated accordingly. Cracking stuff, that should prove most helpful when we finally get our procedure parsing code back up and running.

In other map-making news, Librarian Jayne has also added steps and routes describing scrutiny reserve for the Joint Committee on Human Rights, to both made affirmative remedial order procedure map and data. Another standing order, digitally satisfied.

Knowing our reader's long memory, you'll no doubt recall that - again some time back - we expanded our JCSI reporting step to take account of the criteria under which said committee might report on an instrument. Back then, JO Jane ran the show, and declared that, whilst she was perfectly happy for us to capture the data, she did not want it to appear on the website, fearing more noise than signal. With JO Jane now departed and happily scampering around retirement fields, Librarian Jayne thought it best to check in with the current clerk of the JCSI and the Counsel for Delegated Legislation in order to establish whether opinions had changed. And changed they had.

Both parties had been unaware that we'd been collecting the data and were more than happy to have it appear on the website. Not only this, the Counsel for Delegated Legislation has also asked for a regular report on which reporting criteria are seen most often. Luckily, since the introduction of step collections, adding reporting criteria steps to the website is merely a matter of adding them to the website visible step collection. And our rinky-dinky SPARQL endpoint and query library make reporting on numbers a trivial change. More satisfied customers. Lovely.

In our final piece of procedural news, we're delighted to announce that moves to retire our procedure editor application and replace it with a Data Graphs implementation. also appear to be going swimmingly. We now have all of the model in place, and about half of the data migrated. Though, given the data awaiting migration requires more in the way of munging, maybe we should claim we're about a third of the way there.

## Taxonomic liberation (or toward a single-subject view of the Library)

Efforts to liberate our taxonomy from its software-imposed straightjacket continue to progress rather nicely, potential derailments avoided by the ever watchful eye of Librarian Susannah. As of this outing of 'week'notes, we've set up a new Data Graphs project, pointed that project at our new taxonomy message queue, added piping to keep our list of - subject indexed - Research Briefings up to date, revised the application code to apply taxonomic transitivity on read rather than write, imported Librarian Ned's latest attempt to map Library specialists to terms in the taxonomy, imported their contact details, and adapted the web interface code to take its data from the new project. We've even figured out how to take an email address and pop the user into a Teams chat or call from an HTML link. A feat that inspired childlike joy in our Michael.

Unlike most of our usual efforts, there is personal data involved here, in the form of both specialists and their contact details. Getting a Teams call is bad enough. Getting a Teams call from a complete stranger does not bear thinking about. So, for once, we cannot provide links and you'll just have to take our word for it.

## Members and the contacting thereof

Still on the subject of contact point modelling, we've had a long-standing problem displaying contact information for Members on the website. Whilst the underlying database had a single table that appeared to do everything required of it, the MNIS administration application split the population of that that table into two types: physical - or postal - addresses and online links. Every time a Member got in touch to say they'd quite like to list a physical address alongside it's online equivalent, we were forced to politely decline and explain they could have one, or the other, or both, but not both together.

Happily, colleagues in the Parliamentary Computational Section rushed to the rescue and the application constraint has new been removed. Meaning the physical and the digital can now happily co-exist as a single contact point in the database and a single card on the website. We hope our customers - and indeed their customers - will be pleased.

The change also introduced a brand new field, in the shape of a note suitable for public display. In order to populate that, Librarian Emily has been combing through our internal notes field, spotting the ones intended for public consumption and moving them accordingly. Lovely stuff.

## On matters of modelling

Those of an ontological bent will be delighted to hear that Librarian Ned and his trusty computational helpmates have given our [house membership model](https://ukparliament.github.io/ontologies/house-membership/house-membership-ontology) a much needed lick of paint. Clerkly eyes, should they be reading, are encouraged to take a look.

## A Rush and a push

Shedcode James having quite a lot on his plate at the moment hasn't stopped him from lending a helping hand with our Rush database. That application has also been subjected to an upgrade, though - being better maintained in general - that was confined to bumping it to Rails 8.

Librarian Anna had also spotted a couple of places where our date of birth redaction had gone awry. Not because of any fault in the redaction code, but rather that assorted strings describing name changes also came complete with dates, some of those dates birth event related. That has also now been fixed. Thanks James.

## Facts and indeed figures

And finally, in a somewhat timely coincidence, the latest in our series of Parliamentary Facts and Figures publications has just emerged from the Library paint shop and hit the newstands. This one describing [Members of the House of Commons finding themselves sentenced to imprisonment since 1945](https://commonslibrary.parliament.uk/research-briefings/sn04594/). Dive in. Enjoy.



